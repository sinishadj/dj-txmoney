# Config file for automatic testing at travis-ci.org
language: python
cache: pip

# Use container-based infrastructure
sudo: false

matrix:
  include:
   - env: TOXENV=py27-dj18-sqlite
     python: 2.7
   - env: TOXENV=py27-dj18-postgres
     python: 2.7
   - env: TOXENV=py35-dj18-sqlite
     python: 3.5
   - env: TOXENV=py35-dj18-postgres
     python: 3.5
   - env: TOXENV=py27-dj19-sqlite
     python: 2.7
   - env: TOXENV=py27-dj19-postgres
     python: 2.7
   - env: TOXENV=py35-dj19-sqlite
     python: 3.5
   - env: TOXENV=py35-dj19-postgres
     python: 3.5

# Package installation
install: pip install tox codecov

# Pre-test configuration
before_script:
  - psql -c 'create database txmoney;' -U postgres

# Run the tests
script: tox

after_success: codecov

# Who to notify about build results
notifications:
  email:
    recipients:
      - mateu.canaves@txerpa.com
    on_success: change
    on_failure: always
